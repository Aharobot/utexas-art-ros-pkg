<!-- -*- mode: XML -*- -->
<!-- rostest of multiple ringcomp nodelets running on the same data

     Uses rostest, because a running roscore is required.

     $Id$
  -->

<launch>

  <!-- set PCAP file name for driver nodelet -->
  <param name="driver_nodelet/pcap"
         value="$(find velodyne_common)/tests/class.pcap"/>

  <!-- define transforms for static vehicle -->
  <include file="$(find velodyne_common)/launch/static_vehicle_tf.launch" />

  <!-- start nodelet manager, driver, transform and six ringcomp nodelets -->
  <include file="$(find velodyne_ringcomp)/tests/multi_ringcomp.launch" />

  <!-- verify obstacles publication rate -->
  <test test-name="multi_ringcomp_hertz" pkg="rostest"
        type="hztest" name="hztest_ringcomp" >
    <param name="hz" value="9.75" />
    <param name="hzerror" value="0.75" />
    <param name="test_duration" value="10.0" />    
    <param name="topic" value="velodyne/obstacles" />  
    <param name="wait_time" value="5.0" />  
  </test>

  <test test-name="multi_ringcomp_hertz2" pkg="rostest"
        type="hztest" name="hztest_ringcomp2" >
    <param name="hz" value="9.75" />
    <param name="hzerror" value="0.75" />
    <param name="test_duration" value="10.0" />    
    <param name="topic" value="velodyne/obstacles2" />  
    <param name="wait_time" value="5.0" />  
  </test>

  <test test-name="multi_ringcomp_hertz3" pkg="rostest"
        type="hztest" name="hztest_ringcomp3" >
    <param name="hz" value="9.75" />
    <param name="hzerror" value="0.75" />
    <param name="test_duration" value="10.0" />    
    <param name="topic" value="velodyne/obstacles3" />  
    <param name="wait_time" value="5.0" />  
  </test>

  <test test-name="multi_ringcomp_hertz4" pkg="rostest"
        type="hztest" name="hztest_ringcomp4" >
    <param name="hz" value="9.75" />
    <param name="hzerror" value="0.75" />
    <param name="test_duration" value="10.0" />    
    <param name="topic" value="velodyne/obstacles4" />  
    <param name="wait_time" value="5.0" />  
  </test>

  <test test-name="multi_ringcomp_hertz5" pkg="rostest"
        type="hztest" name="hztest_ringcomp5" >
    <param name="hz" value="9.75" />
    <param name="hzerror" value="0.75" />
    <param name="test_duration" value="10.0" />    
    <param name="topic" value="velodyne/obstacles5" />  
    <param name="wait_time" value="5.0" />  
  </test>

  <test test-name="multi_ringcomp_hertz6" pkg="rostest"
        type="hztest" name="hztest_ringcomp6" >
    <param name="hz" value="9.75" />
    <param name="hzerror" value="0.75" />
    <param name="test_duration" value="10.0" />    
    <param name="topic" value="velodyne/obstacles6" />  
    <param name="wait_time" value="5.0" />  
  </test>

</launch>
